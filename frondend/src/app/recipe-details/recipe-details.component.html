<div *ngIf="recipe" class="wrapper">
    <mat-card>
        <mat-card-header>
            <mat-card-title>{{ recipe.name }}</mat-card-title>
            <mat-card-subtitle>{{ recipe.description }}</mat-card-subtitle>
            <mat-card-subtitle> Created by : {{ recipe.creator.firstname }} {{ recipe.creator.lastname }}</mat-card-subtitle>
        </mat-card-header>
        <img [src]="recipe.imageUrl" mat-card-image />
        <mat-card-content class="content">
            <div class="ingredients">
                <mat-list>
                    <div mat-subheader>Ingredients:</div>
                    <mat-list-item *ngFor="let ingredientQuantity of recipe.ingredientsQuantity">
                        {{ ingredientQuantity.ingredient.name }} - {{ ingredientQuantity.quantity }}
                    </mat-list-item>
                </mat-list>
            </div>

            <div class="instructions">
                <mat-list>
                    <div mat-subheader>Instructions:</div>
                    <mat-list-item>
                        <p>{{ recipe.instructions }}</p>
                    </mat-list-item>
                </mat-list>
            </div>
        </mat-card-content>
        <mat-divider class="divider"></mat-divider>
        <mat-card-content class="comments">
            <div mat-subheader>Comments :</div>
            <mat-list>
                <mat-list-item *ngFor="let comment of recipe.comments">
                    <h4 mat-line>{{ comment.title }}</h4>
                    <p mat-line>
                        <span>By {{ comment.author }} on {{ comment.date | date }}</span>
                    </p>
                    <p mat-line>{{ comment.content }}</p>
                </mat-list-item>
            </mat-list>
        </mat-card-content>
        <mat-card-actions *ngIf="user && canEditRecipe(recipe)" align="start">
            <a color="primary" mat-button [routerLink]="['/app', 'recipes', 'edit', recipe.id]"><mat-icon>edit</mat-icon> Edit</a>
            <button color="warn" mat-button (click)="deleteRecipe(recipe.id)"><mat-icon>delete</mat-icon> Delete</button>
        </mat-card-actions>
    </mat-card>
</div>
